# Prompt Fill（提示詞填空器）

一個專為 AI 繪畫（GPT、Nano Banana 等）設計的**結構化提示詞生成工具**。透過可視化的「填空」互動方式，幫助使用者快速構建、管理和迭代複雜的 Prompt。

## 📝 寫在前面

Prompt Fill 現已迭代至 **v0.5.0** 版本。本專案初衷是解決 AI 繪畫過程中提示詞難記憶、難管理、修改繁瑣的問題。透過將 Prompt 結構化，讓創作變得像「填空」一樣簡單。

### 🌟 目前進度與核心功能
- **✅ 結構化 Prompt 引擎**：支援 `{{variable}}` 語法，自動將文本模板轉化為互動式表單。
- **✅ 動態詞庫系統**：預置數百個常用美術標籤，支援分類管理、自訂擴充及批次匯入。
- **✅ 高清社交分享**：內建模板封面渲染，支援一鍵匯出精美的 JPG 長圖（自動提取氛圍色）。
- **✅ 模板/版本感知**：官方模板雲端同步感知，無需手動重新整理即可取得最新模板與功能。
- **✅ 純本地儲存**：基於瀏覽器 LocalStorage，無需註冊登入，資料完全掌握在自己手中。

## ✨ 核心特性

* **🧩 智慧詞庫管理**：
  * **分類管理**：支援自訂詞庫分類（如人物、動作、畫面、物品等），並透過顏色區分，視覺更清晰。
  * **雙向同步**：在右側預覽填空時，可直接添加「自訂選項」，自動反向同步到左側詞庫中，無需來回切換。
  * **分類編輯器**：內建分類管理器，支援增刪改分類及其顏色配置（12 種預設顏色）。
  * **回應式佈局**：詞庫列表支援瀑布流式多列佈局，空間利用更高效。

* **📝 多模板系統**：
  * 支援建立多個獨立的 Prompt 模板（如「角色概念分解圖」、「3x3 攝影網格」）。
  * **獨立狀態**：每個模板的變數選擇（Selection）互不干擾。
  * **副本克隆**：支援一鍵建立模板副本，方便進行 A/B 測試或微調。

* **🖱️ 可視化互動**：
  * **所見即所得編輯**：編輯模式下變數根據分類顏色高亮顯示，支援直接文本編輯與結構調整。
  * **拖曳插入**：直接將左側詞庫卡片拖入編輯區域，即可快速插入變數。
  * **預覽模式**：模板中的變數（`{{role}}`）會自動渲染為可點擊的下拉選單。
  * **獨立實例**：同一變數在模板中出現多次（如 `{{color}}`），可分別選擇不同的值（支援 `color-0`, `color-1` 獨立索引）。

* **💾 自動持久化**：
  * 利用 LocalStorage 自動儲存所有修改（模板、詞庫、分類配置）。
  * 重新整理頁面或關閉瀏覽器後，資料不會遺失。

* **🖼️ 圖像管理**：
  * **預覽圖展示**：每個模板支援關聯預覽圖，顯示在模板標題區域，視覺效果更豐富。
  * **自訂上傳**：支援上傳自訂圖片替換預設預覽圖（支援 jpg、png、webp 等格式）。
  * **圖片操作**：游標懸停在圖片上時顯示操作按鈕：查看大圖、上傳新圖、重設預設圖。
  * **大圖預覽**：點擊查看大圖按鈕，可在 Lightbox 模式下全螢幕瀏覽圖片。
  * **裝飾背景**：預覽圖會作為模糊背景顯示在模板頂部，營造沉浸式氛圍。

* **📋 匯出與分享**：
  * **一鍵複製**：複製最終生成的乾淨 Prompt 文本。
  * **儲存長圖**：支援將目前填好的 Prompt 模板匯出為高清圖片，方便分享與存檔。

## 🛠️ 技術棧

* **建置工具**：[Vite](https://vitejs.dev/)
* **前端框架**：[React](https://react.dev/)
* **樣式庫**：[Tailwind CSS](https://tailwindcss.com/)
* **圖示庫**：[Lucide React](https://lucide.dev/)
* **匯出工具**：[html2canvas](https://html2canvas.hertzen.com/)

## 🚀 快速開始

### 前置要求
確保您的環境已安裝 [Node.js](https://nodejs.org/)（推薦 v18+）。

### 安裝與執行

1. **克隆專案**

   ```bash
   git clone https://github.com/TanShilongMario/PromptFill.git
   cd PromptFill
   ```

2. **安裝依賴**

   ```bash
   npm install
   ```

3. **啟動開發伺服器**

   ```bash
   npm run dev
   ```

   會自動打開瀏覽器訪問 `http://localhost:5173`。

4. **建置生產版本**

   ```bash
   npm run build
   ```

### 快捷啟動腳本
專案根目錄下提供了快捷腳本，雙擊即可一鍵啟動服務並打開瀏覽器：

* Windows: `start.bat`
* macOS: `start.command`

## 📖 使用指南

### 第一步：管理分類 (Categories)
* 點擊左側面板頂部的「管理分類」按鈕。
* 在此處您可以新增分類、修改現有分類名稱或顏色（支援 12 種預設顏色），以及刪除不需要的分類。
* 每個分類都有獨特的顏色標識，幫助您在編輯和預覽時快速識別不同類型的變數。

### 第二步：建立詞庫 (Banks)
* 點擊「建立新變數組」新增新的變數詞庫，並為其指定分類。
* 在詞庫卡片中新增具體選項：
  * **單個新增**：直接輸入選項並按 Enter。
  * **批次新增**：輸入多個選項（一行一個），系統會自動分割新增。
* 詞庫支援拖曳功能，可直接拖入編輯器快速插入變數。

### 第三步：編輯模板 (Templates)
* 點擊右上角的「編輯模板」按鈕進入可視化編輯模式。
* **拖曳插入**：按住左側的詞庫卡片，拖入編輯器即可插入變數（如 `{{weather}}`）。
* **手動輸入**：也可以直接在編輯器中輸入 `{{變數名}}`，系統會自動識別並渲染。
* 編輯器中的變數會根據其所屬分類顯示對應顏色，方便識別和管理。
* 支援復原/重做功能，隨時調整模板結構。

### 第四步：預覽與生成
* 切換回「預覽互動」模式。
* 點擊彩色的變數詞，從下拉選單中選擇選項。
* **自訂選項**：如果選項不存在，點擊下拉選單底部的「+ 新增自訂選項」，輸入並回車即可直接選用並自動儲存到詞庫。
* **多實例支援**：同一變數在模板中出現多次時（如 `{{color}}`），每個實例可以獨立選擇不同的值。

### 第五步：管理模板圖片（可選）
* **查看預覽圖**：如果模板關聯了預覽圖，會顯示在模板標題右上角，同時作為模糊背景裝飾頂部區域。
* **上傳自訂圖片**：
  1. 將滑鼠悬停在預覽圖上，會顯示三個操作按鈕。
  2. 點擊中間的「上傳圖片」按鈕（圖片圖示）。
  3. 選擇本地圖片檔案（支援 jpg、png、gif、webp 等格式）。
  4. 圖片會自動上傳並替換當前預覽圖。
* **查看大圖**：點擊左側的「查看大圖」按鈕（放大圖示），可在全螢幕模式下瀏覽圖片細節。
* **重設圖片**：點擊右側的「重設預設圖片」按鈕（撤銷圖示），可恢復模板的預設預覽圖。

### 第六步：匯出與分享
* **複製結果**：點擊右上角的「複製結果」按鈕，一鍵複製最終生成的純淨 Prompt 文本，可直接貼到 AI 繪畫工具中使用。
* **儲存長圖**：點擊「儲存長圖」按鈕，將當前填好的 Prompt 模板（包含預覽圖）匯出為高清圖片（PNG 格式），方便分享、存檔或作為參考。匯出前會等待封面圖載入並進行 Base64 預取，避免出現空白封面。
* **匯入 / 匯出（Beta）**：支援匯入/匯出模板與詞庫為 JSON。匯入前建議手動備份，匯入後系統模板將自動合併、使用者資料保留。

## 💡 使用技巧

1. **批次建立詞庫**：在新增選項時，可以一次輸入多行文本，系統會自動按行分割成多個選項。
2. **模板副本功能**：在測試不同 Prompt 效果時，使用「建立副本」功能可以保留原模板，方便對比。
3. **顏色編碼系統**：為不同類型的變數設定不同顏色，可以讓複雜的模板結構更加清晰易讀。
4. **多實例獨立選擇**：當同一個變數在模板中出現多次時，系統會自動為它們分配獨立的索引（如 `color-0`, `color-1`），每個位置可以選擇不同的值。
5. **自訂預覽圖**：為模板上傳有代表性的參考圖片，可以幫助快速識別不同模板的用途，也讓匯出的長圖更具視覺吸引力。
6. **圖片尺寸建議**：上傳的預覽圖建議尺寸為 300x300px 左右的正方形或直式圖片，這樣能在介面中獲得最佳顯示效果。
7. **本地資料安全**：所有資料（包含上傳的圖片）都儲存在瀏覽器本地，定期匯出備份可以避免資料遺失。
8. **標籤化檢索**：為模板打標籤後，可在列表中按標籤篩選快速定位。
9. **瀑布流瀏覽**：模板列表支援瀑布流展示，多張封面瀏覽更高效。
10. **匯入/匯出（Beta）**：可一鍵匯出全部模板/詞庫為 JSON，或匯入他人配置；匯入前建議先手動備份。
11. **多源圖片上傳**：新建或編輯模板時，支援本地檔案與圖片 URL；如需最佳匯出效果，推薦使用同源的 `public/` 內圖片路徑。
12. **本地化儲存**：預設使用瀏覽器本地儲存保存模板、詞庫及圖片；如需跨裝置同步，請配合匯入/匯出。

## 🗺️ 路線圖 (Roadmap)

我們正致力於不斷優化與擴展 Prompt Fill 的功能，以下是未來的更新計畫：

* **🚀 產品應用化**：
  * 開發 iOS 原生應用，提供更好的行動端互動體驗。
  * 推出桌面端軟體（Electron/Tauri），實現完全不依賴網路的在地化環境，確保隱私與極致效能。
* **🤝 模板生態社群**：
  * 支援模板一鍵分享與線上匯入，打造屬於 Prompt 創作者的共享社群。
* **🤖 AI 智能賦能**：
  * **詞庫擴充**：接入 AI 自動生成並擴充相關變數的候選項。
  * **提示詞重組**：支援 AI 對既有提示詞進行結構化拆解與一鍵優化重組。
* **✨ 深度體驗優化**：
  * 更多高品質內建模板持續更新。
  * 引入更先進的模板分類與標籤管理模式，支援無限層級的詞庫組織。

## 📝 更新日誌

* **🏗️ 深度架構重構**：
  * **元件化解耦**：將巨型 `App.jsx` 拆分為 `DiscoveryView`（發現視圖）、`TemplatesSidebar`（模板側邊欄）、`BanksSidebar`（詞庫側邊欄）等多個獨立元件，大幅提升程式碼可維護性。
  * **效能飛躍**：透過 `React.memo` 和全域狀態優化，顯著減少了無效重渲染，解決了在某些瀏覽器下的「螢幕閃爍」和「跳動」問題。
  * **資源調度**：引入後台任務智慧調度，當介面處於編輯模式時自動暫停瀑布流滾動等高負載動效，降低 GPU 佔用。
* **🎨 全新互動體驗**：
  * **獨立發現頁**：引入全新的「發現視圖」(Discovery View)，作為應用的入口，以瀑布流形式展示所有模板及其精美封面。
  * **抽屜式懸浮**：優化了發現頁的 Hover 效果，採用底部「抽屜式」升起的磨砂玻璃標籤，視覺更輕量。
  * **全功能工具列**：側邊欄找回了排序、重新整理、語言切換及設定工具，並新增了醒目的「回到主頁」快捷按鈕。
* **📸 匯出功能增強**：
  * **寬度優化**：將匯出長圖的寬度從 `600px` 提升至 `860px`，適配更複雜的提示詞排版，減少換行。
  * **文字美化**：優化了匯出圖片中的變數膠囊樣式，確保文字清晰度與 UI 質感的一致性。
  * **穩定性修復**：徹底解決了匯出時正文內容可能遺漏的問題。
* **🔔 模板更新感知**：
  * 新增模板/應用雙重版本校驗，雲端更新即時彈窗提醒，支援一鍵無損同步。
* **✨ 新模板補充**：
  * 新增「雨滴定格藝術」「可視化藝術成長之路」等高分模板及配套詞庫。

* **匯出功能優化**：
  * 匯出格式改為 JPG（92% 品質），檔案大小減少 60-70%
  * 添加模糊背景框，從模板圖片自動提取顏色，視覺效果更高級
  * 重構匯出佈局：圖片移至頂部（限高 300px），標題精簡（移除版本號和標籤），正文不重複標題，底部統一顯示版本號和二維碼
  * 匯出按鈕支援載入狀態顯示（「匯出中...」），防止重複點擊
  * 網址字型與整體風格統一協調
  * 優化匯出尺寸：降低 scale（3.0 → 2.5），減小內邊距，整體圖片尺寸減少 30-40%

* **行動端體驗提升**：
  * 匯入模板使用 Toast 通知替代 alert，更友好
  * 完整備份匯入顯示詳細確認對話框（模板數量、詞庫數量、分類數量）
  * 添加匯入載入狀態和進度回饋
  * 修復手機端匯入檔案後無回饋的問題

* **細節改進**：
  * 匯出圖片中的變數膠囊添加輕微陰影，更立體
  * 版本號動態取得，支援持續升級
  * 底部浮水印優化，移除冗餘標籤

* **模板體驗**：新增瀑布流展示、標籤過濾；支援匯入/匯出（Beta）；新建模板可上傳本地或 URL 圖片。
* **資料儲存**：預設本地化保存模板與詞庫，支援一鍵重新整理系統模板/詞庫並保留使用者自訂。
* **匯出改進**：長圖匯出等待圖片載入並進行 Base64 預取，避免封面空白。
* **新模板/詞庫**：新增「經典場景微縮復刻」「可視化企業成長之路」等模板；補充公司、畫幅比例、渲染風格（3D 像素）等詞庫。
* **工程與啟動**：`start.bat` 與啟動腳本相容性修復；瀏覽器自動開啟邏輯優化。

* **UI 優化**：
  * 優化「新建模板」按鈕樣式，採用統一的 Premium Button 設計語言，提升整體視覺一致性
  * 按鈕增加懸停漸變效果和陰影動畫，互動體驗更加流暢

* **功能說明**：
  * 完善圖像上傳和展示功能的文件說明
  * 支援自訂上傳模板預覽圖
  * 圖片懸停操作：查看大圖、上傳新圖、重設預設圖
  * Lightbox 全螢幕圖片預覽模式

* **文件完善**：
  * 重構使用指南，採用分步驟的結構化說明
  * 新增「使用技巧」章節，提供最佳實踐建議（包含圖片使用建議）
  * 新增更新日誌，記錄版本迭代歷史
  * 補充圖像管理功能的詳細說明

* 增加模板匯出長圖功能
* 支援自訂分類顏色配置
* 優化回應式佈局體驗
* 修復多個已知問題

* 初始版本發佈
* 基礎的模板管理功能
* 詞庫建立與編輯功能
* 變數填空互動系統

## 🤝 貢獻

歡迎提交 Issue 或 Pull Request 來改進這個專案！

如果您有任何建議或發現了 Bug，請隨時在 [GitHub Issues](https://github.com/TanShilongMario/PromptFill/issues) 中告訴我們。

## 📄 授權

本專案採用 [MIT 授權](LICENSE)。

**Made with ❤️ by 角落工作室**
